## Техническая документация: Система управления группами и мониторинга активности (Обновленная)

### 1\. Введение

Этот документ содержит технические спецификации для веб-приложения, предназначенного для управления группами и мониторинга ежедневной активности детей, участвующих в организованных выездных мероприятиях (например, лагеря, экскурсии, праздничные поездки). Основная цель этого приложения — повышение безопасности детей путем систематического контроля их численности на всех этапах поездки, включая транспортировку на автобусах.

### 2\. Заинтересованные стороны

  * **Администратор:** Основное ответственное лицо, которое получает информацию от воспитателей и контролирует общее количество детей. Администратор получает оповещения в случае расхождений в количестве детей.
  * **Воспитатель (Betreuer):** Сотрудники, ответственные за отдельные группы детей (примерно 10 детей в группе) и за наблюдение за детьми в автобусах. Каждый воспитатель назначается на определенную группу, выполняет пересчет и отправляет данные Администратору через приложение.

### 3\. Обзор системы

Система предоставляет упрощенный метод сбора и отображения сводной информации о группах и автобусах. Она поддерживает:

  * **Регистрация персонала:** Воспитатели могут войти в систему для работы с определенной группой на текущий день, указав свое имя.
  * **Отслеживание количества детей:** Система записывает количество детей, присутствующих в каждой группе и в каждом автобусе на текущий день.
  * **Административный надзор:** Администраторы имеют сводное представление обо всех группах и автобусах, включая назначенных воспитателей и количество детей, с отслеживанием активности и автоматическим обновлением данных.

### 4\. Структура и организация системы

  * **Общее количество детей:** Приблизительно 150 детей, разделенных на 15 групп.
  * **Размер группы:** Каждая группа состоит примерно из 10 детей.
  * **Отслеживание групп:** Каждая группа отслеживается индивидуально и к ней прикреплен воспитатель. Пересчеты выполняются в каждой точке перемещения.
  * **Отслеживание автобусов:** Дети также отслеживаются по автобусам во время транспортировки.

### 5\. Рабочий процесс

Приложение поддерживает непрерывный процесс мониторинга на протяжении всего мероприятия:

  * **Перед отправлением:**
      * Воспитатели пересчитывают детей в своих группах перед посадкой в автобус.
      * Данные о количестве отправляются Администратору через приложение, устанавливая `KinderAnzahl` для их группы на день.
      * Воспитатели, ответственные за автобусы, пересчитывают детей и других воспитателей в назначенном им автобусе и отправляют эти данные через модуль `b_bus.html`.
  * **По прибытии:**
      * Пересчет выполняется при высадке из автобуса.
      * Воспитатели снова отправляют данные группы, обновляя `KinderAnzahlNow`.
 
  * **Вечер / Конец дня:**
      * Выполняется окончательный пересчет всех детей.
      * Данные сверяются с `KinderAnzahl` утреннего пересчета.
      * В случае расхождений (`KinderAnzahl` != `KinderAnzahlNow`), Администратор получает сигнал тревоги (визуальное выделение) и может просмотреть информацию о пропавших детях и их воспитателях. Сам "процесс поиска" находится вне области действия этого приложения.

### 6\. Технические требования

  * **Целевая аудитория:** Немецкоговорящий персонал, ответственный за безопасность детей во время групповых мероприятий.
  * **Платформа:** Исключительно адаптировано для использования на мобильных телефонах Android и iOS.
  * **Язык:** Пользовательский интерфейс должен быть на немецком языке. (Important!!!)
  * **Пользовательский опыт:** Удобный и адаптированный пользовательский интерфейс для экранов смартфонов, обеспечивающий простоту использования для всех участников, включая нетехнических лиц.

### 7\. Используемые технологии

  * **HTML5:** Обеспечивает базовую структуру для всех веб-страниц.
  * **CSS (Bootstrap 5.3.3):** Используется для современного, адаптивного и визуально привлекательного пользовательского интерфейса, включая стилизацию форм, кнопок, таблиц, навигации и спиннеров.
  * **JavaScript (Vue.js 3):** Прогрессивный фреймворк для frontend-разработки, обеспечивающий:
      * **Привязка данных:** Автоматическая синхронизация между моделью данных и представлением.
      * **Обработка событий:** Реагирование на взаимодействия с пользователем (например, клики по кнопкам, ввод данных).
      * **Управление состоянием:** Эффективное управление данными клиентского приложения.
      * **Динамическое обновление контента:** Обновление частей страницы без полной перезагрузки.
  * **Развертывание:** Приложение распространяется в виде ссылки на веб-сайт, которая для удобства может быть представлена в виде QR-кода.
  * **Хостинг:** Размещено на GitHub ([https://github.com/alex-lysenko-de/stadtranderholung.git](https://github.com/alex-lysenko-de/stadtranderholung.git)).

### 8\. Модули приложения (названия файлов)

Проект состоит из нескольких основных HTML-файлов и дополнительных файлов для будущих расширений, каждый из которых имеет свои уникальные функциональные возможности. Все страницы, кроме `a_login.html` и `b_login.html`, должны содержать кнопку "Zurück" (Назад) в самом низу, которая вызывает `history.back()`.

#### `index.html` (Страница конфигурации)

**Назначение:** Этот модуль служит точкой входа для настройки приложения. Он позволяет администраторам или ответственным лицам установить ключевые параметры, необходимые для работы других частей приложения, включая подключение к базе данных JSONBin.io, базовый URL приложения, the number of busses, the number of groups 

**Функциональность:**

  * **Поля ввода:**
      * `Jahr` (Год): Текстовое поле для указания текущего года (по умолчанию - текущий год). Используется для организации данных в JSONBin.io по годам.
	  * `TOTAL_GROUPS` : Total number of groups of children (input type = "number" min=1 default=15)
	  * `TOTAL_BUSES`: Total number of buses (input type = "number" min=1 default=3)
      * `Bin_Collection_Name (JSONBin.io)`: Текстовое поле для ввода имени коллекции (или "библиотеки") в JSONBin.io, где будут храниться данные. default value: "SR2025".
      * `Master Key (JSONBin.io)`: Текстовое поле для ввода Master Key вашего аккаунта JSONBin.io. Это ключ с полными правами доступа.
	  default value: '$2a$10$Yxp3iL9EqLkbpNRwKv0et.hXwFYAtyN3wkFpYhkyiCmD8riOLllqm'
      * `Access Key (JSONBin.io)`: Текстовое поле для ввода Access Key вашего аккаунта JSONBin.io. Этот ключ обычно используется для чтения/записи данных. default value: '$2a$10$25EbEOOZQFXGw/T2PkMKm.EELC/3G9sFCI7TNaAxpkawvjEUhAYCu'
      * `Basis-URL (ohne Dateinamen)`: Текстовое поле для указания базового URL, по которому развернуты файлы приложения (`a_login.html`, `b_login.html` и т.д.). По умолчанию: `https://raw.githack.com/alex-lysenko-de/stadtranderholung/main/`.
  * **Сохранение в Local Storage:** При нажатии кнопки "Einstellungen Speichern" все введенные данные сохраняются в локальном хранилище браузера. Это позволяет приложению запоминать настройки между сессиями.
  * **Загрузка из Local Storage:** При открытии страницы `index.html` приложение автоматически пытается загрузить сохраненные настройки из локального хранилища, если они доступны.
  * **Генерация URL для входа:**
      * **"Admin Login URL anzeigen"**: Генерирует полный URL для страницы входа администратора (`a_login.html`), включая все настроенные параметры в качестве параметров запроса (query parameters).
      * **"Betreuer Login URL anzeigen"**: Генерирует полный URL для страницы входа воспитателя (`b_login.html`), также включая все настроенные параметры.
  * **Отображение URL и QR-кода:** Сгенерированный URL отображается в специальном блоке "Ergebnisse" вместе с соответствующим QR-кодом для удобного доступа с мобильных устройств.
  * **Функции распространения URL:**
      * **"Verteilen (Whatsapp, E-Mail, Zwischenablage)"**: Позволяет поделиться сгенерированным URL через стандартный механизм обмена в браузере (если поддерживается) или скопировать его в буфер обмена.
      * **"In Zwischenablage kopieren"**: Копирует сгенерированный URL непосредственно в буфер обмена.

#### 8.1. `b_login.html`

  * **Назначение:** Точка входа для воспитателей. Пользователи вводят текущую дату, свое имя (Betreuer) и номер группы.
  * **Функциональность:**
      * Автоматически устанавливает текущую дату в поле ввода.
      * Сохраняет имя воспитателя в локальном хранилище браузера для будущего удобства.
      * Отправляет данные о назначении воспитателя в центральное хранилище JSON (JSONBin.io), связывая воспитателя с конкретной группой на текущий день.
      * При успешной отправке данных перенаправляет пользователя на `b_group.html`, передавая номер группы в качестве параметра URL.
  * **Навигация:** Содержит ссылки на `b_bus.html` и `b_group.html`.
  Another Key task of the module is to obtain the values of basic parameters such as:
- TOTAL_GROUPS
- TOTAL_BUSES
- MASTER_KEY
- ACCESS_KEY
- BIN_COLLECTION_NAME
- BIN_ID
and saves these parameters in LocalStorage
the module receives these parameters at least at the first launch from the index.HTML as a list of get-parameters:

[https://example.com/b\_login.html?TOTAL\_GROUPS=15\&TOTAL\_BUSES=3\&BIN\_COLLECTION\_NAME=SR2025\&BIN_ID=\&MASTER\_KEY=\&ACCESS\_KEY=](https://example.com/b_login.html?TOTAL_GROUPS=15&TOTAL_BUSES=3&BIN_COLLECTION_NAME=SR2025&BIN_ID=&MASTER_KEY=&ACCESS_KEY=)

these parameters will be used by this module and other modules (b_bus.html, b_group.html)
if at least one value of the key parameters is not set in LocalStorage, the module can not work properly. In this case it displays the corresponding message and does nothing.

#### 8.2. `b_group.html`

  * **Назначение:** Предназначен для взаимодействия с данными конкретной группы.
  * **Функциональность:**
      * Автоматически определяет номер группы из параметров URL (`?gr=X`), используемых для перенаправления из `b_login.html`.
      * Позволяет воспитателю ввести начальное количество детей, присутствующих в группе на текущее утро (`KinderAnzahl`). Это значение (обычно) устанавливается один раз в начале дня и представляет собой количество детей, полученных от родителей, и ожидается, что это будет то же самое количество, которое будет возвращено.
      * Позволяет воспитателю пересчитать и ввести количество детей в текущий момент (`KinderAnzahlNow`). Это значение может обновляться несколько раз в течение дня.
      * Отправляет введенные данные о количестве детей (`KinderAnzahl` и `KinderAnzahlNow`) в хранилище JSONBin.
      * Включает кнопки "Liste der Kinder bearbeiten" (Редактировать список детей) и "Rechnen" (Пересчитать) (will be implemented in the future)
  * **Навигация:** Включает кнопку "Zurück".

#### 8.3. `b_bus.html`

  * **Назначение:** Предназначен для записи и обновления количества детей и воспитателей в конкретном автобусе. Этот модуль следует аналогичным правилам, что и `b_group.html`.
  * **Функциональность:**
      * Предоставляет форму для ввода следующих данных:
          * **Номер автобуса (`bus_number`):** Целое число от 1 до `TOTAL_BUSES` . Это должен быть выпадающий список для выбора.
          * **Количество детей (`kinder_count`):** Целое число от 0 до 200.
          * **Количество воспитателей (`betreuer_count`):** Целое число от 0 до 200.
      * Кнопка "Senden" (Отправить) отправляет информацию в JSONBin.io.
      * `betreuer_name` (имя воспитателя, отправляющего данные об автобусе) извлекается из локального хранилища браузера, где оно было сохранено из `b_login.html`.
  * **Навигация:** Включает кнопку "Zurück".

#### 8.4. `a_login.html`

  * **Назначение:** Точка входа для администраторов.
  * **Функциональность:** Эта страница служит целевой страницей для администраторов, предоставляя ссылки на различные административные представления и страницу входа воспитателя. На этой странице не выполняется прямой ввод или отправка данных.
  * **Навигация:** Содержит ссылки на:
      * `a_bus.html` (Обзор автобусов администратора)
      * `a_overview.html` (Обзор групп администратора)
      * `b_login.html` (Вход воспитателя, для административного тестирования или прямого доступа при необходимости).
  Another Key task of the module is to obtain the values of basic parameters such as:
- TOTAL_GROUPS
- TOTAL_BUSES
- MASTER_KEY
- ACCESS_KEY
- BIN_COLLECTION_NAME
- BIN_ID
and saves these parameters in LocalStorage
the module receives these parameters at least at the first launch from the index.HTML as a list of get-parameters:

[https://example.com/a\_login.html?TOTAL\_GROUPS=15\&TOTAL\_BUSES=3\&BIN\_COLLECTION\_NAME=SR2025\&BIN_ID=\&MASTER\_KEY=\&ACCESS\_KEY=](https://example.com/a_login.html?TOTAL_GROUPS=15&TOTAL_BUSES=3&BIN_COLLECTION_NAME=SR2025&BIN_ID=&MASTER_KEY=&ACCESS_KEY=)

these parameters will be used by this module and other modules (a_bus.html, a_overview.html)
if at least one value of the key parameters is not set in LocalStorage, the module can not work properly. In this case it displays the corresponding message and does nothing.

#### 8.5. `a_overview.html`

  * **Назначение:** Предоставляет администраторам централизованный обзор всех групп и их текущего состояния.
  * **Функциональность:**
      * Загружает и отображает сводную информацию для всех групп в интерактивной таблице.
      * **Обработка начального состояния:**
          * При открытии страница запрашивает данные из JSONBin.io для текущей даты.
          * Если данные не найдены (что означает, что ни один воспитатель еще не вошел в систему на день), in this case отображается только кнопки without information about groups
          * После нажатия "Aktualisieren" страница запрашивает данные из JSONBin again. если данные по-прежнему отсутствуют, отображается пустой список.
      * **Отображение общего количества детей:** Явно отображает общее количество детей по всем группам для `KinderAnzahl` (утренний подсчет) и `KinderAnzahlNow` (текущий подсчет) в самом начале страницы. Если эти два значения не совпадают, расхождение должно быть выделено красным цветом, а также информация о том, сколько детей отсутствует, в каких группах, и имена детей и их воспитателей.
      * **Кнопка "Überprüfung durchgeführt":**
          * Большая кнопка в верхней части страницы.
          * **Функциональность :** Нажатие этой кнопки вызывает обращение к JSONBin.io для установки всех значений `KinderAnzahlNow` для текущего дня в `null` для всех групп. это сигнализирует всем участникам процесса, что процесс пересчёта закончен, все данные  обработаны и дети могут расходиться. обнуление счётчиков также даёт возможность в будущем выполнить следующий пересчёт.
          
      * Для каждой группы отображается: номер группы, `KinderAnzahl` (утренний подсчет), `KinderAnzahlNow` (текущий пересчет, если доступен) и список назначенных воспитателей на текущий день.
      * **Визуализация статуса:** Группы, для которых данные (например, `KinderAnzahl` или список `Betreuer`) еще не были введены, отображаются серым цветом, указывая на "неактивный" статус для текущего дня.
      * **Индикатор загрузки:** Если `KinderAnzahlNow` для группы неизвестно (данные отсутствуют/null), отображается спиннер с сообщением "Berechnung läuft..." (Расчет выполняется...), имитирующий получение данных.
      * **Навигация:** Каждый номер группы в таблице служит ссылкой для перехода на страницу `b_group.html` для этой конкретной группы с использованием параметра URL `b_group.html?gr=X` (например, `b_group.html?gr=1`).
  * **Навигация:** Включает кнопку "Zurück".
Die Information über:
- TOTAL_GROUPS
- TOTAL_BUSES
- MASTER_KEY
- ACCESS_KEY
- BIN_COLLECTION_NAME
- BIN_ID
aus LocalStorage erhalten werden muss. When etwas fehlt, kann die Module nicht richtig functionieren. In diesem Fall entsprechende information muss angezeigt werden.



#### 8.6. `a_bus.html`

  * **Назначение:** Предоставляет администраторам сводное представление всех данных по автобусам за текущий день.
  * **Функциональность:**
      * Загружает и отображает сводную информацию для всех автобусов в интерактивной таблице или списке.
      * Для каждого автобуса отображается: номер автобуса, `kinder_count` (количество детей в автобусе), `betreuer_count` (количество воспитателей в автобусе) и `betreuer_name` (имя воспитателя, который последним отправил данные для этого автобуса).
      * Страница  обновляется в ручном режиме опрашивая JSONBin.io when user press button "Aktualisieren".
  * **Навигация:** Включает кнопку "Zurück".
  Die Information über:
- TOTAL_GROUPS
- TOTAL_BUSES
- MASTER_KEY
- ACCESS_KEY
- BIN_COLLECTION_NAME
- BIN_ID
aus LocalStorage erhalten werden muss. When etwas fehlt, kann die Module nicht richtig functionieren. In diesem Fall entsprechende information muss angezeigt werden.

#### 8.7. `group_edit.html` (Редактирование списка детей)

  * **Назначение:** Для управления списком отдельных детей (их имен) в группе.
  * **Функциональность:**
      * Доступ осуществляется через кнопку "Liste der Kinder bearbeiten" на `b_group.html`.
      * Отображает список имен детей в группе, загруженных из JSONBin.io.
      * Позволяет добавлять новые имена детей и удалять существующие.
      * Вводится только имя ребёнка; никакая другая информация не требуется.
      * После добавления или удаления имени ребенка, изменения автоматически сохраняются в JSONBin.io в структуре данных группы (под `groups[groupNumber].Kinder`).
  * **Навигация:** Включает кнопку "Zurück".
 

#### 8.8. `group_calc.html` (Просмотр и расчет количества детей)

  * **Назначение:** Для отображения и сравнения утреннего и текущего количества детей в группе.
  * **Функциональность:**
      * Доступ осуществляется через кнопку "Rechnen" на `b_group.html`.
      * Загружает и отображает `KinderAnzahl` (утренний подсчет) и `KinderAnzahlNow` (текущий подсчет) для данной группы из JSONBin.io.
      * Рассчитывает и отображает разницу между `KinderAnzahl` и `KinderAnzahlNow`.
      * Если данные отсутствуют (`null`), отображается соответствующее сообщение.
  * **Навигация:** Включает кнопку "Zurück".

### 9\. Служба хранения данных JSON

  * **Сервис:** JSONBin.io используется в качестве облачной службы хранения данных JSON. Он предоставляет простой RESTful API для хранения, извлечения и обновления документов JSON, подходящий для небольших проектов и прототипов.

### 10\. Структура данных JSON

Данные в JSONBin.io хранятся в виде одного корневого объекта JSON, организованного по датам. Каждая дата содержит информацию о группах и автобусах, активных в этот день.

**Пример структуры:**

```json
{
  "YYYY-MM-DD": { // Key: Date in "Year-Month-Day" format
    "groups": {
      "1": { // Key: Group number (string)
        "Betreuer": [ // Array of names of staff assigned to this group
          "Name_Employee_1",
          "Name_Employee_2"
        ],
        "KinderAnzahl": 15, // Number of children in the group for this date (morning count)
        "KinderAnzahlNow": 15, // Number of children in the group after recalculation (current count)
        "Kinder": ["Kind A", "Kind B", "Kind C"] // Array of children's names
      },
      "2": {
        "Betreuer": [
          "Name_Employee_3"
        ],
        "KinderAnzahl": 10,
        "KinderAnzahlNow": 9, // (!) 10 - 9 = 1 child is lost; administrator needs to be informed
        "Kinder": ["Kind D", "Kind E"]
      },
      "3": {
        "Betreuer": [], // Empty array if no Betreuer assigned
        "KinderAnzahl": null, // null if child count not specified
        "KinderAnzahlNow": null,
        "Kinder": []
      },
      "4": {
        "Betreuer": ["Name_Employee_4"],
        "KinderAnzahl": 10,
        "KinderAnzahlNow": null, // Recalculation data not yet received, but likely to be soon
        "Kinder": ["Kind F", "Kind G"]
      }
      // ... other groups with their data
    },
    "buses": {
      "1": {
        "kinder_count": 51,
        "betreuer_count": 8,
        "betreuer_name": "John Doe"
      },
      "2": {
        "kinder_count": 41,
        "betreuer_count": 3,
        "betreuer_name": "Jane Roe"
      }
      // ... other buses with their data
    }
  },
  "YYYY-MM-DD_another_date": {
    "groups": {
      // ... data for another date
    },
    "buses": {
      // ... data for another date
    }
  }
  // ... other entries for other dates
}
````

**Пояснение структуры:**

  * **Корневой объект:** Контейнер для всех данных. Ключами являются даты в формате "ГГГГ-ММ-ДД" (например, "2025-07-26").
  * **Объект даты:** Для каждой конкретной даты содержатся вложенные объекты с ключами "groups" и "buses".
  * **Объект групп:** Содержит набор ключей, каждый из которых представляет строковую версию номера группы (например, "1", "2", "15").
  * **Объект группы:** Для каждой группы на определенную дату хранятся четыре поля:
      * `Betreuer` (Массив строк): Массив, содержащий имена (строки) всего персонала, который "вошел" в эту группу на указанную дату. Может быть пустым, если никто не вошел.
      * `KinderAnzahl` (Число или null): Числовое значение, представляющее количество детей, зарегистрированных в этой группе на эту дату (утренний подсчет). Ожидается, что это значение будет установлено один раз в начале дня и останется постоянным. Может быть null, если начальное количество детей не было введено.
      * `KinderAnzahlNow` (Число или null): Фактическое количество детей, доступных в данный момент, полученное в результате пересчета в течение дня. Эта цифра может отличаться от `KinderAnzahl`, обычно в меньшую сторону. Когда Администратор нажимает кнопку "Überprüfung durchgeführt", это значение сбрасывается в null для всех групп, что побуждает воспитателей инициировать пересчет. Сравнивая `KinderAnzahl` и `KinderAnzahlNow`, Администратор может определить, отсутствуют ли какие-либо дети или все ли они присутствуют.
      * `Kinder` (Массив строк): Массив, содержащий имена (строки) отдельных детей в этой группе. Используется для подробного управления списком детей.
  * **Объект автобусов:** Содержит набор ключей, каждый из которых представляет строковую версию номера автобуса (например, "1", "2").
  * **Объект автобуса:** Для каждого автобуса на определенную дату хранятся три поля:
      * `kinder_count` (Число): Количество детей в автобусе.
      * `betreuer_count` (Число): Количество воспитателей в автобусе.
      * `betreuer_name` (Строка): Имя последнего воспитателя, который отправил данные для этого автобуса.

### 11\. Информация для доступа к JSONBin.io

  * **MASTER\_KEY:** `2a10$Yxp3iL9EqLkbpNRwKv0et.hXwFYAtyN3wkFpYhkyiCmD8riOLllqm`
  * **ACCESS\_KEY:** `2a10$25EbEOOZQFXGw/T2PkMKm.EELC/3G9sFCI7TNaAxpkawvjEUhAYCu`
  * **BIN\_ID:** `68834e6e7b4b8670d8a712d0` (Это ID для Bin "Days" в Collection "SR2025")

### 12\. Предлагаемые технические решения для нерешенных вопросов

#### 12.2. Обработка ошибок и обратная связь с пользователем

**Общий подход:** Реализовать простую систему оповещений или "тост-уведомлений" (например, используя компоненты оповещений Bootstrap или легкую библиотеку уведомлений).

**Страница входа (`b_login.html`):**

  * **Успех:** При успешном входе и отправке данных может появиться краткое сообщение "Anmeldung erfolgreich\!" (Вход выполнен успешно\!) перед перенаправлением.
  * **Ошибка:** Если отправка данных в JSONBin.io не удается (например, ошибка сети, проблема с API), должно отображаться заметное сообщение "Fehler bei der Anmeldung. Bitte versuchen Sie es erneut." (Ошибка при входе. Пожалуйста, попробуйте еще раз.).

**Страница группы (`b_group.html`) и страница автобуса (`b_bus.html`):**

  * **Успех:** После отправки `KinderAnzahl` или `KinderAnzahlNow` (для групп) или данных об автобусе, небольшое сообщение "Daten gespeichert\!" (Данные сохранены\!).
  * **Ошибка:** Если отправка данных не удается, сообщение "Fehler beim Speichern der Daten." (Ошибка сохранения данных.).

**Страница обзора администратора (`a_overview.html`):**

  * **Ошибки загрузки данных:** Если опрос JSONBin.io не удается, может появиться незаметное сообщение "Datenaktualisierung fehlgeschlagen. Netzwerkproblem?" (Обновление данных не удалось. Проблема с сетью?) без слишком большого прерывания работы пользователя.

### 13\. Взаимодействие модулей и хранение данных

**Централизованное хранение данных (JSONBin.io):**

JSONBin.io служит единственной точкой истины для всех данных приложения. Все модули, которым требуется постоянное хранение или чтение актуальной информации о группах, детях и автобусах, взаимодействуют именно с этим сервисом.

  * `b_login.html`: Отправляет данные о назначении воспитателя (имя, группа, дата) в JSONBin.io, обновляя соответствующую запись для текущего дня.
  * `b_group.html`: Отправляет данные о количестве детей (`KinderAnzahl`, `KinderAnzahlNow`) в JSONBin.io для конкретной группы и даты.
  * `b_bus.html`: Отправляет данные о количестве детей и воспитателей в автобусе в JSONBin.io для конкретного автобуса и даты.
  * `a_overview.html`: Загружает сводные данные о группах из JSONBin.io для отображения, а также отправляет запрос на сброс `KinderAnzahlNow` для всех групп при нажатии кнопки "Überprüfung durchgeführt".
  * `a_bus.html`: Загружает сводные данные об автобусах из JSONBin.io для отображения.

**Локальное хранилище браузера (Local Storage):**

Local Storage используется для временного хранения пользовательских настроек и некоторых данных, которые должны быть доступны между сессиями или для удобства пользователя.

  * `index.html`: Сохраняет все введенные конфигурационные параметры (Jahr, Bin Collection Name, Master Key, Access Key, Basis-URL) в Local Storage. При повторном открытии страницы эти настройки автоматически загружаются.
  * `b_login.html`: Сохраняет имя воспитателя (`betreuer_name`) в Local Storage, чтобы при следующем входе ему не пришлось вводить его заново.
  * `b_bus.html`: Извлекает имя воспитателя (`betreuer_name`) из Local Storage для включения его в отправляемые данные об автобусе.
  * `group_edit.html` (будущее расширение): Предполагается, что будет хранить список  детей в группе в Local Storage. Состав группы определяется в самом начале сезона. После чего  список детей в группе и принадлежность ребенка к группе почти никогда не меняется до конца сезона. Поэтому есть смысл хранить эту информацию в LocalStorage.
  * `group_calc.html` (будущее расширение): Предполагается, что будет использовать список детей из Local Storage для пересчета.

**Поток данных и взаимодействия:**

1.  **Настройка приложения (`index.html`):** Администратор или ответственное лицо устанавливает основные параметры (ключи JSONBin.io, базовый URL, TOTAL\_GROUPS, TOTAL\_BUSES) и сохраняет их в Local Storage. Затем генерируются URL для входа администратора и воспитателей, которые могут быть распространены.
2.  **Вход воспитателя (`b_login.html`):** Воспитатель входит в систему, указывая свое имя и группу. Имя сохраняется в Local Storage. Данные о назначении воспитателя отправляются в JSONBin.io.
3.  **Управление группой (`b_group.html`):** Воспитатель, перенаправленный с `b_login.html` с параметром группы, вводит начальное количество детей (`KinderAnzahl`) и текущее количество (`KinderAnzahlNow`). Эти данные отправляются в JSONBin.io. Кнопки "Liste der Kinder bearbeiten" и "Rechnen" ведут к соответствующим модулям (`group_edit.html`, `group_calc.html`).
4.  **Управление автобусом (`b_bus.html`):** Воспитатель выбирает номер автобуса и вводит количество детей и воспитателей. Имя воспитателя берется из Local Storage. Эти данные отправляются в JSONBin.io.
5.  **Страница входа администратора (`a_login.html`):** Служит навигационным центром для администратора, предоставляя ссылки на различные административные обзоры и, при необходимости, на страницу входа воспитателя для тестирования.
6.  **Обзор администратора (группы) (`a_overview.html`):** Администратор просматривает сводные данные по группам, которые опрашиваются из JSONBin.io. При расхождениях между `KinderAnzahl` и `KinderAnzahlNow` отображается оповещение. Кнопка "Überprüfung durchgeführt" инициирует обновление данных в JSONBin.io, устанавливая `KinderAnzahlNow` в `null` для всех групп, тем самым сигнализируя воспитателям об окончании текущего пересчёта и давая возможность выполнить новый пересчёт в будущем.
7.  **Обзор администратора (автобусы) (`a_bus.html`):** Администратор просматривает сводные данные по автобусам, которые также  опрашиваются из JSONBin.io.

**Зависимости между модулями (Frontend):**

  * **`index.html`** -\> генерирует ссылки для **`a_login.html`** и **`b_login.html`**.
  * **`b_login.html`** -\> перенаправляет на **`b_group.html`** (с параметром группы); содержит ссылки на **`b_bus.html`**.
  * **`b_group.html`** -\> содержит ссылки на **`group_edit.html`** и **`group_calc.html`**.
  * **`a_login.html`** -\> содержит ссылки на **`a_overview.html`**, **`a_bus.html`** и **`b_login.html`**.
  * **`a_overview.html`** -\> содержит ссылки на **`b_group.html`** (по номеру группы).

Каждый модуль работает с Vue.js для управления состоянием и динамического обновления интерфейса, используя Bootstrap для стилизации и qrcode.js для генерации QR-кодов на `index.html`.
