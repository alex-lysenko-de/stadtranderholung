
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administrator Login - Stadtranderholung</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="main.css" rel="stylesheet">
</head>
<body>
    <div id="app">
        <div class="login-container">
            <div class="login-card">
                <div class="card-header admin">
                    <div class="admin-icon">ðŸ”§</div>
                    <h2 class="mb-0">Administrator</h2>
                    <p class="mb-0 mt-2">Stadtranderholung 2025</p>
                </div>
                <div class="navigation-section">
                    <div id="alertContainer"></div>
                    
                    <div v-if="hasParameters && isConfigLoaded" class="parameters-info">
                        <h6 class="mb-2">ðŸ“‹ Geladene Parameter:</h6>
                        <div v-for="(value, key) in loadedParameters" :key="key" class="parameter-item">
                            <strong>{{ key }}:</strong> {{ value }}
                        </div>
                    </div>
                    
                    <div class="d-grid gap-2">
                        <button @click="navigateTo('a_overview.html')" class="btn btn-primary admin nav-button" :disabled="!isConfigLoaded">
                            ðŸ“Š Gruppen Ãœbersicht
                        </button>
                        
                        <button @click="navigateTo('a_bus.html')" class="btn btn-primary admin nav-button" :disabled="!isConfigLoaded">
                            ðŸšŒ Bus Ãœbersicht
                        </button>
                        
                        <button @click="navigateTo('b_login.html')" class="btn btn-info nav-button" :disabled="!isConfigLoaded">
                            ðŸ‘¤ Betreuer Login
                        </button>
                    </div>
                    
                    <div class="mt-4 text-center">
                        <small class="text-muted">
                            Aktuelle Zeit: {{ currentDateTime }}
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    
    <script type="module">
        import { CONFIG_DEFAULTS, JSONBinAPI, Utils } from './common.js';

        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    currentDateTime: '',
                    loadedParameters: {},
                    hasParameters: false,
                    isConfigLoaded: false, 
                    config: {}
                };
            },
            
            mounted() {
                this.initializePage(); // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ Ð¼ÐµÑ‚Ð¾Ð´ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸
                this.startClock();
            },
            
            methods: {
                /**
                 * Ð¡Ñ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð°Ñ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹ Ð´Ð»Ñ Vue-ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ð¾Ð²
                 * Ð—Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÑ‚ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ Ð¸ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÑ‚ API
                 */
                initializePage() {
                    console.log('Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹ a_login.html...');
                    const success = Utils.initializePage(this); // Ð’Ñ‹Ð·Ð¾Ð² Ð¸Ð· common.js

                    if (success) {
                        // ÐžÑ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ñ‹Ñ… Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¾Ð² Ð² UI
                        this.loadedParameters = {};
                        for (const key in this.config) {
                            // Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð²Ð½ÑƒÑ‚Ñ€ÐµÐ½Ð½Ð¸Ñ… ÐºÐ»ÑŽÑ‡ÐµÐ¹ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð½Ðµ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶Ð°Ñ‚ÑŒÑÑ
                            if (key !== 'API_BASE_URL') { 
                                this.loadedParameters[key] = this.config[key];
                            }
                        }
                        this.hasParameters = Object.keys(this.loadedParameters).length > 0;
                        
                        if (this.hasParameters) {
                            const paramCount = Object.keys(this.loadedParameters).length;
                            Utils.showAlert(
                                `${paramCount} Parameter erfolgreich geladen und gespeichert.`, 
                                'success'
                            );
                            console.log('Geladene Parameter:', this.loadedParameters);
                        }
                    } else {
                        console.error('ÐžÑˆÐ¸Ð±ÐºÐ° Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹.');
                    }
                    this.updateDateTime();
                },

                /**
                 * ÐÐ°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ñ Ð½Ð° ÑƒÐºÐ°Ð·Ð°Ð½Ð½ÑƒÑŽ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñƒ
                 * @param {string} page - Ð˜Ð¼Ñ Ñ„Ð°Ð¹Ð»Ð° Ñ†ÐµÐ»ÐµÐ²Ð¾Ð¹ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹
                 */
                navigateTo(page) {
                    Utils.navigateTo(page, this); // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ð¹ Ð½Ð°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ð¸ Ð¸Ð· common.js
                },

                /**
                 * ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ñ‚ÐµÐºÑƒÑ‰Ð¸Ðµ Ð´Ð°Ñ‚Ñƒ Ð¸ Ð²Ñ€ÐµÐ¼Ñ
                 */
                updateDateTime() {
                    this.currentDateTime = Utils.getCurrentDateTime(); // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ Utils Ð¸Ð· common.js
                },

                /**
                 * Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ Ñ‡Ð°ÑÑ‹ Ð´Ð»Ñ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ ÐºÐ°Ð¶Ð´ÑƒÑŽ Ð¼Ð¸Ð½ÑƒÑ‚Ñƒ
                 */
                startClock() {
                    this.updateDateTime();
                    setInterval(() => {
                        this.updateDateTime();
                    }, 60000);
                }
            }
        }).mount('#app');
    </script>
</body>
</html>